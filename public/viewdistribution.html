



<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <title>Dashboard</title>

        <!-- STYLESHEETS -->
        <style type="text/css">
            [fuse-cloak],
            .fuse-cloak {
                display: none !important;
            }
        </style>

        <!-- Icons.css -->
        <link type="text/css" rel="stylesheet" href="/public/assets/icons/fuse-icon-font/style.css">

        <!-- Animate.css -->
        <link type="text/css" rel="stylesheet" href="/public/assets/vendor/animate.css/animate.min.css">

        <!-- PNotify -->
        <link type="text/css" rel="stylesheet" href="/public/assets/vendor/pnotify/pnotify.custom.min.css">

        <!-- Nvd3 - D3 Charts -->
        <link type="text/css" rel="stylesheet" href="/public/assets/vendor/nvd3/build/nv.d3.min.css"/>

        <!-- Perfect Scrollbar -->
        <link type="text/css" rel="stylesheet" href="/public/assets/vendor/perfect-scrollbar/css/perfect-scrollbar.min.css"/>

        <!-- Fuse Html -->
        <link type="text/css" rel="stylesheet" href="/public/assets/vendor/fuse-html/fuse-html.min.css"/>

        <!-- Main CSS -->
        <link type="text/css" rel="stylesheet" href="/public/assets/css/main.css">
        <!-- / STYLESHEETS -->

        <!-- JAVASCRIPT -->

        <!-- jQuery -->
        <script type="text/javascript" src="/public/assets/vendor/jquery/dist/jquery.min.js"></script>

        <!-- Mobile Detect -->
        <script type="text/javascript" src="/public/assets/vendor/mobile-detect/mobile-detect.min.js"></script>

        <!-- Perfect Scrollbar -->
        <script type="text/javascript"
                src="/public/assets/vendor/perfect-scrollbar/js/perfect-scrollbar.jquery.min.js"></script>

        <!-- Popper.js -->
        <script type="text/javascript" src="/public/assets/vendor/popper.js/index.js"></script>

        <!-- Bootstrap -->
        <script type="text/javascript" src="/public/assets/vendor/bootstrap/bootstrap.min.js"></script>

        <!-- Nvd3 - D3 Charts -->
        <script type="text/javascript" src="/public/assets/vendor/d3/d3.min.js"></script>
        <script type="text/javascript" src="/public/assets/vendor/nvd3/build/nv.d3.min.js"></script>

        <!-- Data tables -->
        <script type="text/javascript" src="/public/assets/vendor/datatables.net/js/jquery.dataTables.min.js"></script>

        <script type="text/javascript" src="/public/assets/vendor/datatables-responsive/js/dataTables.responsive.js"></script>

        <!-- PNotify -->
        <script type="text/javascript" src="/public/assets/vendor/pnotify/pnotify.custom.min.js"></script>

        <!-- Fuse Html -->
        <script type="text/javascript" src="/public/assets/vendor/fuse-html/fuse-html.min.js"></script>

        <!-- Main JS -->
        <script type="text/javascript" src="/public/assets/js/main.js"></script>

        <!-- / JAVASCRIPT -->
    </head>

    <body class="layout layout-vertical layout-left-navigation layout-below-toolbar">

        
        

<div id="wrapper">

    
    <aside id="aside" class="aside aside-left"
    data-fuse-bar="aside" data-fuse-bar-media-step="md"
    data-fuse-bar-position="left">
 <div class="aside-content-wrapper">

<div class="aside-content bg-white text-auto">

<div class="aside-toolbar">

 <div class="logo">
     <img src="/public/assets/ldn/images/logo.png">
 </div>

 <button id="toggle-fold-aside-button" type="button" class="btn btn-icon d-none d-lg-block"
         data-fuse-aside-toggle-fold>
     <i class="icon icon-backburger"></i>
 </button>

</div>

<ul class="nav flex-column custom-scrollbar" id="sidenav" data-children=".nav-item">

<li class="nav-item" role="tab" id="heading-dashboards">

<a class="nav-link ripple "
data-toggle="collapse"
data-target="#collapse-dashboards"
href="/admin/dashboard"
aria-expanded="true"
aria-controls="collapse-dashboards">
<i class="icon s-4 icon-tile-four"></i>
<span>Dashboard</span>
</a>     
</ul>
</li>
<li class="nav-item">
   <a class="nav-link ripple " href="/admin/team"
    data-page-url="">
    <i class="icon s-4 icon-calendar-today"></i>
    <span>Manage Teams</span>
    </a>
</li>
<li class="nav-item">
    <a class="nav-link ripple " href="/admin/languages"
    data-page-url="">
    <i class="icon s-4 icon-calendar-today"></i>
    <span>Manage Languages</span>
    </a>
</li>
<li class="nav-item">
    <a class="nav-link ripple " href="/admin/distributions"
    data-page-url="">
    <i class="icon s-4 icon-calendar-today"></i>
    <span>Manage distributions</span>
    </a>
</li>

<li class="nav-item">
<a class="nav-link ripple " href="#"
data-page-url="">
<i class="icon s-4 icon-group"></i>
<span>Manage Distributions</span>
</a>
</li>

<li class="nav-item">
<a class="nav-link ripple " href="/admin/distributors/"
data-page-url="">
<i class="icon s-4 icon-people"></i>
<span>Manage Distributors</span>
</a>
</li>

<li class="nav-item">
    <a class="nav-link ripple " href="/admin/payments"
        data-page-url="">
        <i class="icon s-4 icon-cash"></i>
        <span>Manage Payments</span>
    </a>
</li>
</ul>
</div>
</div>
</aside>




    <div class="content-wrapper">

        
            <nav id="toolbar" class="fixed-top bg-white">

    <div class="row no-gutters align-items-center flex-nowrap">

        <div class="col">

            <div class="row no-gutters align-items-center flex-nowrap">

                

                    <button type="button" class="toggle-aside-button btn btn-icon d-block d-lg-none"
                            data-fuse-bar-toggle="aside">
                        <i class="icon icon-menu"></i>
                    </button>

                    <div class="toolbar-separator d-block d-lg-none"></div>

                


                <div class="shortcuts-wrapper row no-gutters align-items-center px-0 px-sm-2">

                    <div class="shortcuts row no-gutters align-items-center d-none d-md-flex">
                    </div>

                    <div class="add-shortcut-menu-button dropdown px-1 px-sm-3">

                    </div>
                </div>

            </div>
        </div>

        <div class="col-auto">

            <div class="row no-gutters align-items-center justify-content-end">

                <div class="user-menu-button dropdown">

                    <div class="dropdown-toggle ripple row align-items-center no-gutters px-2 px-sm-4" role="button"
                         id="dropdownUserMenu"
                         data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <div class="avatar-wrapper">
                            <img class="avatar" src="/public/assets/images/avatars/profile.jpg">
                            <i class="status text-green icon-checkbox-marked-circle s-4"></i>
                        </div>
                        <span class="username mx-3 d-none d-md-block">Super Admin</span>
                    </div>

                    <div class="dropdown-menu" aria-labelledby="dropdownUserMenu">

                        <a class="dropdown-item" href="#">
                            <div class="row no-gutters align-items-center flex-nowrap">
                                <i class="icon-account"></i>
                                <span class="px-3">My Profile</span>
                            </div>
                        </a>

                        <a class="dropdown-item" href="#">
                            <div class="row no-gutters align-items-center flex-nowrap">
                                <i class="icon-email"></i>
                                <span class="px-3">Inbox</span>
                            </div>
                        </a>

                        <a class="dropdown-item" href="#">
                            <div class="row no-gutters align-items-center flex-nowrap">
                                <i class="status text-green icon-checkbox-marked-circle"></i>
                                <span class="px-3">Online</span>
                            </div>
                        </a>

                        <div class="dropdown-divider"></div>

                        <a class="dropdown-item" href="#">
                            <div class="row no-gutters align-items-center flex-nowrap">
                                <i class="icon-logout"></i>
                                <span class="px-3">Logout</span>
                            </div>
                        </a>

                    </div>
                </div>

                <div class="toolbar-separator"></div>

                <div class="toolbar-separator"></div>

                <div class="language-button dropdown">

                    <div
                        class="dropdown-toggle ripple row align-items-center justify-content-center no-gutters px-0 px-sm-4"
                        role="button"
                        id="dropdownLanguageMenu"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <div class="row no-gutters align-items-center">
                            <img class="flag mr-2" src="/public/assets/images/flags/us.png">
                            <span class="d-none d-md-block">EN</span>
                        </div>
                    </div>

                    <div class="dropdown-menu" aria-labelledby="dropdownLanguageMenu">

                        <a class="dropdown-item" href="#">
                            <div class="row no-gutters align-items-center flex-nowrap">
                                <img class="flag" src="/public/assets/images/flags/us.png">
                                <span class="px-3">English</span>
                            </div>
                        </a>

                        <a class="dropdown-item" href="#">
                            <div class="row no-gutters align-items-center flex-nowrap">
                                <img class="flag" src="/public/assets/images/flags/es.png">
                                <span class="px-3">Spanish</span>
                            </div>
                        </a>

                        <a class="dropdown-item" href="#">
                            <div class="row no-gutters align-items-center flex-nowrap">
                                <img class="flag" src="/public/assets/images/flags/tr.png">
                                <span class="px-3">Turkish</span>
                            </div>
                        </a>
                    </div>
                </div>

                <div class="toolbar-separator"></div>


                

            </div>
        </div>
    </div>
</nav>
        
<div class="content">
    <div class="page-layout carded full-width">

<div class="page-content-card">
    <!-- CONTENT TOOLBAR -->
    <div class="toolbar p-6">Distributions</div>
    <!-- / CONTENT TOOLBAR -->

    <div class="p-6">
        <!-- DEMO CONTENT -->
        <div class="p-3" style="position:relative; left: 700px;">
            <button type="button" class="btn btn-secondary btn-fab">
              <a href="/admin/languages/createdistribution"><i class="icon-plus"></i></a>
            </button><h6 class="bold p-3" style="display:inline">Add Distribution</h6>
    </div>
        <div class="demo-content">
            <table class="table" id="translationsTableView">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Type</th>
                        <th>Distributors</th>
                        <th>distribution</th>
                        <th>Language</th>
                        <th>Country</th>
                        <th>Date Created</th>
                    </tr>
                </thead>
                <tbody id="translationGrid">
                </tbody>
            </table>
            
            
</div>
        <!-- / DEMO CONTENT -->
    </div>

</div>
</div>
<!-- / CONTENT -->
</div>
</div>


    </div>    
    </div>

</div>
<script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-app.js"></script> 
<!-- Add Firebase products that you want to use -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/7.9.1/modernizr.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-storage.js"></script>
<script type="text/javascript" src="/public/assets/js/custom/distributions.js"></script>

<!-- The core Firebase JS SDK is always required and must be listed first -->

<script>
$(document).ready(function(){

    distributions.loadTransaltions('/dept/admin/tni/distribution').then(function(data){
    let json = JSON.stringify(data);
    console.log('distribution',json);
    let tableBody = document.getElementById('distributionGrid');
     let count = 0;
    $.each($.parseJSON(json),function(key,obj){
        count++;
        let template = $(distributions.getTamplate());
        $(template).find('.count').text(count);
        $(template).find('.type').text(obj.type);
        $(template).find('.distributor').text(obj.distributor);
        $(template).find('.distribution').text(obj.distribution);
        $(template).find('.language').text(obj.language);
        $(template).find('.country').text(obj.country);
        $(template).find('.dateCreated').text(obj.dateCreated);

        $(tableBody).append(template)
    })
});
 
    $("#submitBtn").on('click',function(){
                // disable button
                let self = this
                $(self).prop("disabled", true);
                // add spinner to button
                $(self).html(
                    `<i class="fa fa-spinner fa-spin fa-3x loader"></i>`
                );
               // let firebaseConfig = distributions.getConfigData('/firebase/config');
                var firebaseConfig = {
                            apiKey: "AIzaSyDEQPLbNYogRPr0G47ErxqkGP6VCMvakvI",
                            authDomain: "tnicc-412a9.firebaseapp.com",
                            databaseURL: "https://tnicc-412a9.firebaseio.com",
                            projectId: "tnicc-412a9",
                            storageBucket: "tnicc-412a9.appspot.com",
                            messagingSenderId: "1021374360464",
                            appId: "1:1021374360464:web:5d7f9a0230f14f1d442115",
                            measurementId: "G-T1GRXX01CV"
                        };
                 firebase.initializeApp(firebaseConfig);  


                let file = document.getElementById("rorDocs").files[0];  
                  
                 //   let filename = image.name
                    const metadata = { contentType: file.type };
                    const task = firebase.app().storage().ref('docs/'+file).put(file, metadata); 
                    task.then(snapshot => snapshot.ref.getDownloadURL()).then(function(url) { 
                      
                     let upload = {
                        type: document.getElementById("type").value,
                        distributor: document.getElementById("distributor").value,
                        distribution: document.getElementById("distribution").value,
                        language: document.getElementById("language").value,
                        country: document.getElementById("country").value,
                        dateCreated: document.getElementById("dateCreated").value

                        
                    }
                    console.log('upload',JSON.stringify(upload)); 
                     distributions.uploaddistribution('/dept/admin/tni/distribution/create',upload).then(function (data){
                        var json = JSON.stringify(data); 
                        console.log("json",json);
/*                         var div = document.getElementById("projectListView");  
                        let obj = $.parseJSON(json);

                        let projectTemplate = $(Project.getProjectTemplate());

                        $(projectTemplate).find(".qrcodeSrc").attr("src",obj.qrCode);
                        $(projectTemplate).find(".lead").text(obj.builder.fullname);  
                        $(projectTemplate).find(".project_title").text(obj.title);  
                        $(projectTemplate).find(".project_desc").text(obj.projectDescription);  
                        $(projectTemplate).find(".project_download").attr("href",obj.source);  
                        $(projectTemplate).find(".project_print").attr("id",obj._id);  

                        $(div).append($(projectTemplate));

                            $(self).prop("disabled", false);
                            $(self).remove("i");
                            $('#projectBackdrop').modal("hide"); */
                        
                    })
                   // document.getElementById("photo").src = url; 
                });  


    });



});
function create_UUID(){
            var dt = new Date().getTime();
            var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                var r = (dt + Math.random()*16)%16 | 0;
                dt = Math.floor(dt/16);
                return (c=='x' ? r :(r&0x3|0x8)).toString(16);
            });
            return uuid;
    }
    function selectFileName(input) {
        if (input.files && input.files[0]) {
            $("#filename").text(input.files[0].name);
        }
    }
</script>
</body>
</html>