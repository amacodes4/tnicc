



<!DOCTYPE html>
<html lang="en">

    <head>
        
        <meta charset="UTF-8">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <title>Dashboard</title>

        <!-- STYLESHEETS -->
        <style type="text/css">
            [fuse-cloak],
            .fuse-cloak {
                display: none !important;
            }
        </style>

        <!-- Icons.css -->
        <link type="text/css" rel="stylesheet" href="/public/assets/icons/fuse-icon-font/style.css">

        <!-- Animate.css -->
        <link type="text/css" rel="stylesheet" href="/public/assets/vendor/animate.css/animate.min.css">

        <!-- PNotify -->
        <link type="text/css" rel="stylesheet" href="/public/assets/vendor/pnotify/pnotify.custom.min.css">

        <!-- Nvd3 - D3 Charts -->
        <link type="text/css" rel="stylesheet" href="/public/assets/vendor/nvd3/build/nv.d3.min.css"/>

        <!-- Perfect Scrollbar -->
        <link type="text/css" rel="stylesheet" href="/public/assets/vendor/perfect-scrollbar/css/perfect-scrollbar.min.css"/>

        <!-- Fuse Html -->
        <link type="text/css" rel="stylesheet" href="/public/assets/vendor/fuse-html/fuse-html.min.css"/>

        <!-- Main CSS -->
        <link type="text/css" rel="stylesheet" href="/public/assets/css/main.css">
        <!-- / STYLESHEETS -->

        <style>
        .error{color:red}
        </style>
        <!-- / JAVASCRIPT -->
    </head>

    <body class="layout layout-vertical layout-left-navigation layout-below-toolbar">

        
        

<div id="wrapper">

    
<aside id="aside" class="aside aside-left"
    data-fuse-bar="aside" data-fuse-bar-media-step="md"
    data-fuse-bar-position="left">
 <div class="aside-content-wrapper">

<div class="aside-content bg-white text-auto">

<div class="aside-toolbar">

 <div class="logo">
     <img src="/public/assets/ldn/images/logo.png">
 </div>

 <button id="toggle-fold-aside-button" type="button" class="btn btn-icon d-none d-lg-block"
         data-fuse-aside-toggle-fold>
     <i class="icon icon-backburger"></i>
 </button>

</div>

<ul class="nav flex-column custom-scrollbar" id="sidenav" data-children=".nav-item">

<li class="nav-item" role="tab" id="heading-dashboards">

<a class="nav-link ripple "
data-toggle="collapse"
data-target="#collapse-dashboards"
href="/admin/dashboard"
aria-expanded="true"
aria-controls="collapse-dashboards">
<i class="icon s-4 icon-tile-four"></i>
<span>Dashboard</span>
</a>     
</ul>
</li>
<li class="nav-item">
   <a class="nav-link ripple " href="#"
    data-page-url="">
    <i class="icon s-4 icon-calendar-today"></i>
    <span>Manage Teams</span>
    </a>
</li>
<li class="nav-item">
    <a class="nav-link ripple " href="/admin/languages"
    data-page-url="">
    <i class="icon s-4 icon-calendar-today"></i>
    <span>Manage Languages</span>
    </a>
</li>
<li class="nav-item">
    <a class="nav-link ripple " href="/admin/translations"
    data-page-url="">
    <i class="icon s-4 icon-calendar-today"></i>
    <span>Manage Translations</span>
    </a>
</li>

<li class="nav-item">
<a class="nav-link ripple " href="/admin/distributions"
data-page-url="">
<i class="icon s-4 icon-group"></i>
<span>Manage Distributions</span>
</a>
</li>

<li class="nav-item">
<a class="nav-link ripple " href="/admin/distributors/"
data-page-url="">
<i class="icon s-4 icon-people"></i>
<span>Manage Distributors</span>
</a>
</li>

<li class="nav-item">
    <a class="nav-link ripple " href="/admin/payments"
        data-page-url="">
        <i class="icon s-4 icon-cash"></i>
        <span>Manage Payments</span>
    </a>
</li>
</ul>
</div>
</div>
</aside>


    <div class="content-wrapper">

        
            <nav id="toolbar" class="fixed-top bg-white">

    <div class="row no-gutters align-items-center flex-nowrap">

        <div class="col">

            <div class="row no-gutters align-items-center flex-nowrap">

                

                    <button type="button" class="toggle-aside-button btn btn-icon d-block d-lg-none"
                            data-fuse-bar-toggle="aside">
                        <i class="icon icon-menu"></i>
                    </button>

                    <div class="toolbar-separator d-block d-lg-none"></div>

                


                <div class="shortcuts-wrapper row no-gutters align-items-center px-0 px-sm-2">

                    <div class="shortcuts row no-gutters align-items-center d-none d-md-flex">
                    </div>

                    <div class="add-shortcut-menu-button dropdown px-1 px-sm-3">

                    </div>
                </div>

            </div>
        </div>

        <div class="col-auto">

            <div class="row no-gutters align-items-center justify-content-end">

                <div class="user-menu-button dropdown">

                    <div class="dropdown-toggle ripple row align-items-center no-gutters px-2 px-sm-4" role="button"
                         id="dropdownUserMenu"
                         data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <div class="avatar-wrapper">
                            <img class="avatar" src="/public/assets/images/avatars/profile.jpg">
                            <i class="status text-green icon-checkbox-marked-circle s-4"></i>
                        </div>
                        <span class="username mx-3 d-none d-md-block">Super Admin</span>
                    </div>

                    <div class="dropdown-menu" aria-labelledby="dropdownUserMenu">

                        <a class="dropdown-item" href="#">
                            <div class="row no-gutters align-items-center flex-nowrap">
                                <i class="icon-account"></i>
                                <span class="px-3">My Profile</span>
                            </div>
                        </a>

                        <a class="dropdown-item" href="#">
                            <div class="row no-gutters align-items-center flex-nowrap">
                                <i class="icon-email"></i>
                                <span class="px-3">Inbox</span>
                            </div>
                        </a>

                        <a class="dropdown-item" href="#">
                            <div class="row no-gutters align-items-center flex-nowrap">
                                <i class="status text-green icon-checkbox-marked-circle"></i>
                                <span class="px-3">Online</span>
                            </div>
                        </a>

                        <div class="dropdown-divider"></div>

                        <a class="dropdown-item" href="#">
                            <div class="row no-gutters align-items-center flex-nowrap">
                                <i class="icon-logout"></i>
                                <span class="px-3">Logout</span>
                            </div>
                        </a>

                    </div>
                </div>

                <div class="toolbar-separator"></div>

                <div class="toolbar-separator"></div>

                <div class="language-button dropdown">

                    <div
                        class="dropdown-toggle ripple row align-items-center justify-content-center no-gutters px-0 px-sm-4"
                        role="button"
                        id="dropdownLanguageMenu"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <div class="row no-gutters align-items-center">
                            <img class="flag mr-2" src="/public/assets/images/flags/us.png">
                            <span class="d-none d-md-block">EN</span>
                        </div>
                    </div>

                    <div class="dropdown-menu" aria-labelledby="dropdownLanguageMenu">

                        <a class="dropdown-item" href="#">
                            <div class="row no-gutters align-items-center flex-nowrap">
                                <img class="flag" src="/public/assets/images/flags/us.png">
                                <span class="px-3">English</span>
                            </div>
                        </a>

                        <a class="dropdown-item" href="#">
                            <div class="row no-gutters align-items-center flex-nowrap">
                                <img class="flag" src="/public/assets/images/flags/es.png">
                                <span class="px-3">Spanish</span>
                            </div>
                        </a>

                        <a class="dropdown-item" href="#">
                            <div class="row no-gutters align-items-center flex-nowrap">
                                <img class="flag" src="/public/assets/images/flags/tr.png">
                                <span class="px-3">Turkish</span>
                            </div>
                        </a>
                    </div>
                </div>

                <div class="toolbar-separator"></div>


                

            </div>
        </div>
    </div>
</nav>
        
<div class="content">
    <div class="page-layout carded full-width">

<div class="top-bg bg-secondary"></div>

<!-- CONTENT -->
<div class="page-content">

<!-- HEADER -->
<div class="header py-6 bg-secondary text-white">
    <span class="h3">Create Teams</span>
</div>
<!-- / HEADER -->

<div class="page-content-card">
    <!-- CONTENT TOOLBAR -->
    <div class="toolbar p-6">Fill out this form to create a Team</div>
    <!-- / CONTENT TOOLBAR -->

    <div class="p-6">
        <!-- DEMO CONTENT -->
        <div class="demo-content">

            <form class="pb-0">
                <div class="row pt-0 p-6">
                    <div class="col">
                        <div class="form-group">
                        <input type="text" class="form-control" id="name" placeholder="Team Name" onkeyup="generteLink()"  onkeydown="generteLink()">
                        <span class="error" id="name_error"></span>   
                    </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                        <input type="text" class="form-control" placeholder="Team Leader's Name" id="teamLeaderName">
                        <span class="error" id="teamLeaderName_error"></span>  
                    </div>
                    </div>
                </div>
                <div class="row p-6">
                    <div class="col">
                        <div class="form-group">
                        <input type="email" class="form-control email" placeholder="Team Leader's Email" id="email">
                        <span class="error" id="email_error"></span>   
                    </div>
                    </div>
                    <div class="col">
                        <div class="form-group">
                        <input type="number" class="form-control phone" placeholder="Team Leader's Phone number" id="phoneNumber">
                    <span class="error" id="phoneNumber_error"></span>    
                    </div>

                    </div>
                </div>
                <hr>

                <div class="row p-6">
                    <div class="col">
                       <label class="form-control"><strong>Team Link:</strong><span id="teamLink"></span></label> 
                    </div>
                    <div class="col">
                        <label class="form-control"><strong>Sponsorship Link:</strong><span id="sponsorshipLink"></span></label>
                     </div>
                </div>
                <div class="row">
                        <button class="btn btn-secondary" style="position: relative; margin-left:400px;" type="button" id="submitBtn">Create Team</button>
                </div>
            </form>

</div>
        <!-- / DEMO CONTENT -->
    </div>

</div>
</div>
<!-- / CONTENT -->
</div>
</div>


    </div>    
    </div>

</div>
        <!-- JAVASCRIPT -->

        <!-- jQuery -->
        <script type="text/javascript" src="/public/assets/vendor/jquery/dist/jquery.min.js"></script>

        <!-- Mobile Detect -->
        <script type="text/javascript" src="/public/assets/vendor/mobile-detect/mobile-detect.min.js"></script>

        <!-- Perfect Scrollbar -->
        <script type="text/javascript"
                src="/public/assets/vendor/perfect-scrollbar/js/perfect-scrollbar.jquery.min.js"></script>

        <!-- Popper.js -->
        <script type="text/javascript" src="/public/assets/vendor/popper.js/index.js"></script>

        <!-- Bootstrap -->
        <script type="text/javascript" src="/public/assets/vendor/bootstrap/bootstrap.min.js"></script>

        <!-- Nvd3 - D3 Charts -->
        <script type="text/javascript" src="/public/assets/vendor/d3/d3.min.js"></script>
        <script type="text/javascript" src="/public/assets/vendor/nvd3/build/nv.d3.min.js"></script>

        <!-- Data tables -->
        <script type="text/javascript" src="/public/assets/vendor/datatables.net/js/jquery.dataTables.min.js"></script>

        <script type="text/javascript" src="/public/assets/vendor/datatables-responsive/js/dataTables.responsive.js"></script>

        <!-- PNotify -->
        <script type="text/javascript" src="/public/assets/vendor/pnotify/pnotify.custom.min.js"></script>

        <!-- Fuse Html -->
        <script type="text/javascript" src="/public/assets/vendor/fuse-html/fuse-html.min.js"></script>

        <!-- Main JS -->
        <script type="text/javascript" src="/public/assets/js/main.js"></script>
        <script type="text/javascript" src="/public/assets/js/custom/Team.js"></script>

        <script>
         var baseTeamURL = '/tni/team/link/';
         var basePartnershipURL = '/tni/sponsor/';
         

        $(document).ready(function(){  

                $("#teamLink").text(baseTeamURL);
                $("#sponsorshipLink").text(basePartnershipURL);

                $('#submitBtn').on('click',function(){


                var team =  document.getElementById('name').value;
                var leader =  document.getElementById('teamLeaderName').value;
                var number =  document.getElementById('phoneNumber').value;
                var email =  document.getElementById('email').value;


                document.getElementById('name_error').innerHTML = "";
                document.getElementById('teamLeaderName_error').innerHTML = "";
                document.getElementById('phoneNumber_error').innerHTML = "";
                document.getElementById('email_error').innerHTML = "";

                if(team == ''){
                    document.getElementById('name_error').innerHTML = "required";
                    document.getElementById('name').focus();
                    return false;
                }else if(leader == ''){
                    document.getElementById('teamLeaderName_error').innerHTML = "required";
                    document.getElementById('teamLeaderName').focus();
                    return false;
                }else if(number == ''){
                    document.getElementById('phoneNumber_error').innerHTML = "required";
                    document.getElementById('phoneNumber').focus();
                    return false;
                }else if(email == ''){
                    document.getElementById('email_error').innerHTML = "required";
                    document.getElementById('email').focus();
                    return false;
                }
                var team =  document.getElementById('name').value;
                var leader =  document.getElementById('teamLeaderName').value;
                var number =  document.getElementById('phoneNumber').value;
                var email =  document.getElementById('email').value;

                let teamDetails = {
                    name: team,
                    teamLink: $("#teamLink").text(),
                    sponsorshipLink: $("#sponsorshipLink").text(),
                    teamLeaderName: leader,
                    phoneNumber: number,
                    email: email,
                }
                Team.createTeam('/dept/admin/tni/team/create',teamDetails).then(function(response){

                    console.log("teamDetails",response);
                }).catch(function(error){
                    console.log('error',error);
                }); 
                });
        });
        function generteLink() {
            var x = document.getElementById("name");
            x.value = x.value.toUpperCase();
            x.value = x.value.replace(/\s/g, '');     
            $("#teamLink").text(baseTeamURL+x.value);
            $("#sponsorshipLink").text(basePartnershipURL+x.value);
        }; 
        Team.loadBuildersProject().then(function(data){                   
            var json = JSON.stringify(data); 
            var div = document.getElementById("projectListView");  
            $(div).empty();
            let count = 0;
            $.each($.parseJSON(json), function(keys,obj) {
                    count++
                    let projectTemplate = $(Project.getProjectTemplate());

                    $(projectTemplate).find(".qrcodeSrc").attr("src",obj.qrCode);
                    $(projectTemplate).find(".lead").text(obj.builder.fullname);  
                    $(projectTemplate).find(".project_title").text(obj.title);  
                    $(projectTemplate).find(".project_desc").text(obj.projectDescription);  
                    $(projectTemplate).find(".project_download").attr("href",obj.source);  
                    $(projectTemplate).find(".project_print").attr("id",obj._id);  

                    $(div).append($(projectTemplate));
            });  

            $("#project_count").text(count);

        }).catch(function(error){
            console.log(error.message);
        });

        </script>
        </body>

</html>